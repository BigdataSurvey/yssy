<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zywl.app.defaultx.mapper.UserTimeTaskMapper">


    <insert id="insert" parameterType="UserTimeTask">
        insert into t_user_time_task
        (
            `user_id`,
            `task_id`,
            `context`,
            `condition`,
            `schedule`,
            `status`,
            `reward`,
            `group`
        )
        values
            (
                #{userId},
                #{taskId},
                #{context},
                #{condition},
                #{schedule},
                #{status},
                #{reward},
                #{group}
            )
    </insert>


    <select id="findAll" resultType="UserTimeTask">
        select *
        from t_user_time_task
    </select>


    <select id="findByGroupAndUserId" resultType="UserTimeTask">
        select *
        from t_user_time_task where `group`= #{group} and user_id=#{userId}
    </select>

    <select id="findByIdAndUserId" resultType="UserTimeTask">
        select *
        from t_user_time_task where `task_id`= #{taskId} and user_id=#{userId}
    </select>

    <update id="updateTaskSchedule" parameterType="UserTimeTask">
        UPDATE t_user_time_task set schedule=schedule+#{count} where task_id=#{taskId} and user_id=#{userId}
    </update>

    <update id="updateTaskStatus" parameterType="UserTimeTask">
        UPDATE t_user_time_task set status=#{status} where task_id=#{taskId} and user_id=#{userId}
    </update>

</mapper>