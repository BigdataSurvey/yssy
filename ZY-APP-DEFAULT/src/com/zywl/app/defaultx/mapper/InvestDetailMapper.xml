<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zywl.app.defaultx.mapper.InvestDetailMapper">

    <insert id="insert" parameterType="InvestDetail" useGeneratedKeys="true" keyProperty="id" keyColumn="id">
        insert into t_invest_detail
        (`user_id`,
         `invest_number`,
         `invest_date`,
         `end_date`,
         `invest_seal_status`,
         `un_receive`,
         `gener_yyq`)
        values (#{userId},
                #{investNumber},
                #{investDate},
                #{endDate},
                #{investSealStatus},
                #{unReceive},
                #{generYyq})
    </insert>
    <select id="findInvestDetail" resultType="InvestDetail">
        select * from t_invest_detail where user_id = #{userId} and invest_seal_status = #{investSealStatus}
    </select>
   <select id="getReceiveRecord" resultType="InvestDetail">
        select * from t_invest_detail where user_id = #{userId} and gener_yyq is not null
       <if test="start != null and limit != null">
           limit #{start}, #{limit}
       </if>
       ;
    </select>

    <update id="batchUpdateInvestDetail" parameterType="java.util.List">
        <foreach collection="list" item="item" index="index" open="" close="" separator=";">
            update t_invest_detail
            <set>
                invest_number=#{item.investNumber}, invest_date=#{item.investDate},end_date=#{item.endDate},invest_seal_status = #{item.investSealStatus},gener_yyq=#{item.generYyq},un_receive=#{item.unReceive}
            </set>
            where id= #{item.id}
        </foreach>
    </update>


    <update id="update" parameterType="Admin">
        update t_invest_detail
        <set >
            <if test="investNumber != null">
                invest_number= #{investNumber},
            </if>
            <if test="investDate != null">
                invest_date= #{investDate},
            </if>
            <if test="endDate != null">
                end_date= #{endDate},
            </if>
            <if test="investSealStatus != null">
                invest_seal_status= #{investSealStatus},
            </if>
            <if test="generYyq != null">
                gener_yyq= #{generYyq},
            </if>
            <if test="unReceive != null">
                un_receive= #{unReceive}
            </if>
        </set>
        where user_id = #{userId}
    </update>
</mapper>
