<!DOCTYPE html>
<html>
<head>
<title>邀请好友</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="renderer" content="webkit">
<meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=no,width=device-width,initial-scale=1.0" />
<style>
*{margin:0px;paddng:0px;color:#FF4F45;-webkit-tap-highlight-color: rgba(0,0,0,0); -webkit-tap-highlight-color: transparent; font-family:-apple-system,"Helvetica Neue",Helvetica,Arial,"PingFang SC","Hiragino Sans GB","WenQuanYi Micro Hei","Microsoft Yahei",sans-serif;}
html,body{background-color:#FFF3DA;text-align:center;max-width:26rem; margin:0 auto;-webkit-text-size-adjust: 100% !important;text-size-adjust: 100% !important;-moz-text-size-adjust: 100% !important;}
input {outline: none;}

.clear{clear:both;height:0;overflow:hidden;}
.v-center{position:fixed;top:50%;left:50%;transform: translate(-50%,-50%);}
.modal{background:#000;opacity:0.5; width:100vw;height:100vh;z-index:10;}
.alert{background-color:#fff;z-index:11;padding:1rem;border-radius: .5rem;}
.alert svg path, svg rect {fill: #FF6700;}

.first{}
.last{display:none;}

#body{display:none;}

.title{ margin:2rem 0 1.8rem 0;}
.title .name{font-weight:600;font-size:2.4rem; margin-bottom:.8rem;}
.title .welcome{font-size:1.4rem;font-weight:500;}

.price{margin: 0 auto;width: 75%; border-radius: .5rem .5rem 0 0; background-color: #fff;font-size:1rem;}

.regist{margin: auto;width: 85%;margin-top: -.8rem;}
.regist img{width:100%;display:block}
.regist .regist_title{background-image:url(img/img1.png);background-size:100% 100%;width:100%;padding: 6.5% 0;background-repeat: no-repeat;}
.regist .regist_body{background-color: #ff4f40;border-radius:0 0 1rem 1rem;margin-top: -1px;padding:2rem 0;}
.regist .regist_body p{color:#a21f24;margin: 1.5rem 0 0 0;font-size.8rem;}
.regist .regist_body .line{width:65%;margin:0rem auto 1.5rem auto;vertical-align: middle;}
.regist .regist_body .line input{width:100%;border: none;height: 3rem; border-radius: .5rem; font-size: 1.1rem; text-align: center;color:#666666;padding-left:0;padding-right:0;}
.regist .regist_body .line .verify_code{width:45%;float:right;}
.regist .regist_body .line .verify_code img{width:100%;}
.regist .regist_body .line .verify_code p{font-size:.8rem;color:#FFF;padding:0;margin:0;}
.regist .regist_body .button{width: 65%;background-color:#fdbf12;border-radius:.5rem;padding:.8rem 0;font-weight:800;font-size:1.3rem;color:#1b0000;letter-spacing: .1rem; margin: 0 auto ;}

.bottom{margin:2rem auto;padding-bottom:2rem;width:94%;background-color:#FFF;border-radius:1rem;}
.bottom p{color:#010002; line-height:2.2rem;font-size:1rem;font-weight:800;}
</style>
</head>
<script src="js/jquery/jquery.min.js"></script>
<script>
var userId;
$(function(){
	$.ajax({
		url:'../getShare',
		method:'post',
		data:'share='+ getQueryVariable('k'),
		success:function(data){
			if(data){
				data = JSON.parse(data);
				$("#body").show();
				hideLoading();
				userId = data.userId;
				$("#name").html("“ "+data.name+" ”");
			}else{
				console.warn('此分享链接已失效');
				download();
			}
		}
	});
	$("#next").click(function(){
		var phone = $("#phone").val();
		var verifyCode = $("#verifyCode").val();
		if(!phone){
			alert("请输入手机号");
			$('#phone').focus();
		}else if(!verifyCode){
			alert("请输入验证码");
			$('#verifyCode').focus();
		}else if(!isPhone(phone)){
			alert("请输入正确的手机号码");
			$('#phone').focus();
		}else{
			var params = {userId: userId,phone: phone,verifyCode:verifyCode};
			showLoading();
			$.ajax({
				url:'../invitingFriends',
				type:'json',
				method:'post',
				data:params,
				success:function(data){
					hideLoading();
					if(data == '-1'){
						alert('请输入正确的验证码');
						$('#verifyCode').val('');
						$('#verifyCode').focus();
						reloadVerifyCode();
					}else if(data =='-2'){
						alert('您已注册，不能再次被邀请');
						reloadVerifyCode();
					}else if(data == '1'){
						$('.first').hide();
						goTop();
						$('.last').show();
					}else{
						alert(data);
						reloadVerifyCode();
					}
				},
				error:function(){
					alert('请求失败，请稍后重试');
					hideLoading();
				}
			});
		}
	});
});
function isPhone(phonenumber){
	var myreg=/^[1][1-9][0-9]{9}$/;
	if (!myreg.test(phonenumber)){
		return false;
	} else {
		return true;
	}
}
function getQueryVariable(variable){
	var query = window.location.search.substring(1);
	var vars = query.split("&");
	for (var i=0;i<vars.length;i++) {
		var pair = vars[i].split("=");
     		if(pair[0] == variable){return pair[1];}
	}
}
function showLoading(){
	$("#loading").show();
}
function hideLoading(){
	$("#loading").hide();
}
function reloadVerifyCode(){
	var src = $("#verifyCodeImage").attr('src');
	src = src+'?'+new Date().getTime();
	$("#verifyCodeImage").attr('src', src);
}
function download(){
	window.location.href='https://app.fxbtg-chinese.com/';
}
function goTop() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}
</script>
<body>
	<div id="body">
		<div class="title">
			<p class="name" id="name">“陈先生”</p>
			<p class="welcome">邀请您来FXBTG注册</p>
		</div>
		<div class="body">
			<div class="price">
				<div class="first">
					<p style="padding: 1.8rem 0 .8rem 0;">受邀注册 您将获得</p>
					<p style="font-weight:600;font-size:2.4rem;color:#E5A900;letter-spacing: .2rem;">$666</p>
					<p style="padding:.8rem 0;color:#E5A900;">新手大礼包</p>
				</div>
				<div class="last">
					<p style="padding: 1.8rem 0 .1rem 0; font-size:3rem;font-weight: 600;color:#efa900">恭喜您</p>
					<p style="padding:0 0 .8rem 0;color:#efa900;">离赚钱之差一步</p>
				</div>
			</div>
			<div class="regist">
				<div class="regist_title"></div>
				<div class="regist_body">
					<div class="first">
						<div class="line">
							<input id="phone" placeholder="请输入手机号码" type="number" maxlength="11" value="" />
						</div>
						<div class="line">
							<input id="verifyCode" placeholder="验证码" maxlength="4" type="number" style="width: 50%;float:left;" />
							<div class="verify_code" onclick="reloadVerifyCode()">
								<img src="../verifyCode" id="verifyCodeImage" />
								<p>点击更换验证码</p>
							</div>
							<div class="clear"></div>
						</div>
						<div class="button" id="next">下一步</div>
						<p>活动细则见FXBTG APP</p>
					</div>
					<div class="last" style="padding:1.8rem;">
						<p style="color:#c71d0e;margin: 0 0 1.5rem 0;line-height: 1.4rem;font-size: 1.2rem;">您与好友的推荐关系已建立，请尽快下载APP完成注册，即可获得相应奖励。</p>
						<div class="button" style="width: 95%;" onclick="download()">下载APP领取大礼包</div>
					</div>
				</div>
			</div>
		</div>
		<div class="bottom">
			<div style="padding:1rem;">
				<div style="float:left; width:2rem;">
					<span style="float:right;width:60%;height:.18rem;background-color:#FF4F45;"></span>
					<span style="float:right;width:100%;height:.18rem;background-color:#FF4F45;margin: .35rem 0;"></span>
					<span style="float:right;width:60%;height:.18rem;background-color:#FF4F45;"></span>
				</div>
				<span style="font-size:1.1rem; font-weight:800">WHY CHOOSE FXBTG</span>
				<div style="float:right; width:2rem;">
					<span style="float:left;width:60%;height:.18rem;background-color:#FF4F45;"></span>
					<span style="float:left;width:100%;height:.18rem;background-color:#FF4F45;margin: .35rem 0;"></span>
					<span style="float:left;width:60%;height:.18rem;background-color:#FF4F45;"></span>
				</div>
			</div>
			<div class="clear"></div>
			<p>高度透明</p>
			<p>24小时交易市场</p>
			<p>免费图表分析</p>
			<p>无佣金及隐藏费用</p>
			<p>多层面的安全保障系统</p>
			<p>多种语言功能</p>
			<p>资金安全</p>
			<p>有竞争力的浮动点差</p>
			<p>高风险提示</p>
		</div>
	</div>
	<div id="loading">
		<div class="v-center alert">
		<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="40px" height="40px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">
			<path fill="#000" d="M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z" transform="rotate(119.622 25 25)">
		  		<animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform>
		  	</path>
		</svg>
		</div>
		<div class="v-center modal"></div>
	</div>
</body>
</html>
